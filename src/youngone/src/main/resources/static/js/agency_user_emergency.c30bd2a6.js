"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[835],{1809:function(e,t,s){s.r(t),s.d(t,{default:function(){return oe}});var a=s(3396),i=s(7139),n=s(9242);const l={class:"agency_user_emergency"},r={key:0,class:"app-bar bg-hero fg-white","data-role":"appbar"},c={href:"/#/agency",class:"brand no-hover"},o={style:{"max-width":"200px","white-space":"nowrap"},class:"mif-home"},d=(0,a._)("span",{class:"mif-history"}," History",-1),m=[d],u=(0,a._)("span",{class:"mif-devices"}," Device Status",-1),h=[u],p=(0,a._)("span",{class:"mif-cart"}," Order",-1),y=[p],g=(0,a._)("span",{class:"mif-help"}," Emergency",-1),f=[g],v=(0,a.uE)('<ul class="app-bar-menu"><li><a href="/#/agency"><span class="mif-home"> 메인</span></a></li><li><a href="/#/agency/user/list"><span class="mif-list"> 제품 설치 목록</span></a></li><li><a href="/#/agency/user/add"><span class="mif-wrench"> 제품 설치 등록</span></a></li><li><a href="/#/agency/chpw"><span class="mif-key"> 비밀번호 변경</span></a></li><li><a href="/"><span class="mif-exit"> 로그아웃</span></a></li></ul>',1),$={class:"container-fluid docs-content",style:{height:"auto !important","margin-top":"60px"}},q=["data-title-caption"],_={class:"grid"},w=(0,a.uE)('<div class="row"><div class="cell"><div class="d-flex flex-justify-center" style="font-weight:bold;"> Cylinder &amp; Syrups </div></div><div class="cell"><div class="d-flex flex-justify-center" style="font-weight:bold;"> Filters </div></div><div class="cell"><div class="d-flex flex-justify-center" style="color:red;font-weight:bold;"> Emergency </div></div></div>',1),I={class:"row"},k={class:"cell"},b={class:"d-flex flex-justify-center"},C={class:"cell"},x={class:"d-flex flex-justify-center"},E={class:"cell"},D={class:"d-flex flex-justify-center",style:{color:"red","font-weight":"bold"}},U=(0,a._)("br",null,null,-1),V=(0,a._)("h4",null,"Emergency",-1),R={class:"table table-border cell-border"},z={key:0},O=(0,a._)("th",null,"Date",-1),j={key:1},N=(0,a._)("th",null,"Message",-1),S=(0,a._)("th",null,"Status",-1),Y={key:0},H=["checked","onChange"],P=["onClick"],T=(0,a._)("br",null,null,-1),M={key:1},F=(0,a._)("h4",null,"Visit",-1),G=(0,a._)("div",{class:"space",style:{height:"30px"}},null,-1),K=(0,a._)("div",{class:"space",style:{height:"30px"}},null,-1),Z=(0,a._)("span",{class:"mif-user-md"}," 입력",-1),A=[Z],B=(0,a._)("div",{class:"space",style:{height:"30px"}},null,-1),J=(0,a._)("br",null,null,-1),L=(0,a._)("h4",null,"Process",-1),Q=(0,a._)("div",{class:"space",style:{height:"30px"}},null,-1),W=(0,a._)("div",{class:"space",style:{height:"10px"}},null,-1),X=(0,a._)("div",{class:"space",style:{height:"10px"}},null,-1),ee=(0,a._)("div",{class:"space",style:{height:"30px"}},null,-1),te=(0,a._)("span",{class:"mif-user-md"}," 입력",-1),se=[te],ae=(0,a._)("div",{class:"space",style:{height:"30px"}},null,-1);function ie(e,t,s,d,u,p){return(0,a.wg)(),(0,a.iD)("div",l,[u.show.menu?((0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("a",c,[(0,a._)("span",o,(0,i.zw)(" "+u.info.titleNm),1)]),this.$route.query.mcId?((0,a.wg)(),(0,a.iD)("a",{key:0,onClick:t[0]||(t[0]=e=>p.move("HISTORY")),class:"app-bar-item"},m)):(0,a.kq)("",!0),this.$route.query.mcId?((0,a.wg)(),(0,a.iD)("a",{key:1,onClick:t[1]||(t[1]=e=>p.move("DEVICE")),class:"app-bar-item"},h)):(0,a.kq)("",!0),this.$route.query.mcId?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("a",{key:2,onClick:t[2]||(t[2]=e=>p.move("ORDER")),class:"app-bar-item"},y)),this.$route.query.mcId?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("a",{key:3,onClick:t[3]||(t[3]=e=>p.move("EMERGENCY")),class:"app-bar-item text-upper"},f)),v])):(0,a.kq)("",!0),(0,a._)("div",$,[u.show.summary?((0,a.wg)(),(0,a.iD)("div",{key:0,"data-role":"panel","data-title-caption":"Total Orders "+u.info.total,"data-title-icon":"<span class='mif-news'></span>"},[(0,a._)("div",_,[w,(0,a._)("div",I,[(0,a._)("div",k,[(0,a._)("div",b,(0,i.zw)(u.info.nonfilters),1)]),(0,a._)("div",C,[(0,a._)("div",x,(0,i.zw)(u.info.filters),1)]),(0,a._)("div",E,[(0,a._)("div",D,(0,i.zw)(u.info.emergency),1)])])])],8,q)):(0,a.kq)("",!0),U,V,(0,a._)("table",R,[(0,a._)("thead",null,[(0,a._)("tr",null,[this.$route.query.mcId?((0,a.wg)(),(0,a.iD)("th",z,"select")):(0,a.kq)("",!0),O,this.$route.query.mcId?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("th",j,"ID")),N,S])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.emergencies,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.seq},[this.$route.query.mcId?((0,a.wg)(),(0,a.iD)("td",Y,[(0,a._)("input",{type:"radio","data-role":"radio",checked:e.seq==u.params.seq,name:"seq",onChange:t=>p.seqChange(e.seq)},null,40,H)])):(0,a.kq)("",!0),(0,a._)("td",null,(0,i.zw)(e.date),1),this.$route.query.mcId?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("td",{key:1,class:"move",onClick:t=>p.move("HISTORY",e.mcId)},(0,i.zw)(e.mcId),9,P)),(0,a._)("td",null,(0,i.zw)(this.$getEmergencyMessageFromCode(e.emgcyTpCd)),1),(0,a._)("td",null,(0,i.zw)(e.statCd),1)])))),128))])]),T,this.$route.query.mcId?((0,a.wg)(),(0,a.iD)("div",M,[F,G,(0,a.wy)((0,a._)("input",{type:"text",autocomplete:"off","data-clear-button":"false","data-role":"input","data-prepend":"<span class='mif-ambulance'>방문일정</span>",placeholder:"방문일정","onUpdate:modelValue":t[4]||(t[4]=e=>u.visit.plan=e)},null,512),[[n.nr,u.visit.plan]]),K,(0,a._)("button",{style:{width:"100%"},onClick:t[5]||(t[5]=(...e)=>p.processVisit&&p.processVisit(...e))},A),B,J,L,Q,(0,a.wy)((0,a._)("input",{type:"text",autocomplete:"off","data-clear-button":"false","data-role":"input","data-prepend":"<span class='mif-ambulance'>증상</span>",placeholder:"증상","onUpdate:modelValue":t[6]||(t[6]=e=>u.emergency.symptCntn=e)},null,512),[[n.nr,u.emergency.symptCntn]]),W,(0,a.wy)((0,a._)("input",{type:"text",autocomplete:"off","data-clear-button":"false","data-role":"input","data-prepend":"<span class='mif-stethoscope'>원인</span>",placeholder:"원인","onUpdate:modelValue":t[7]||(t[7]=e=>u.emergency.causeDesc=e)},null,512),[[n.nr,u.emergency.causeDesc]]),X,(0,a.wy)((0,a._)("input",{type:"text",autocomplete:"off","data-clear-button":"false","data-role":"input","data-prepend":"<span class='mif-medkit'>조치</span>",placeholder:"조치","onUpdate:modelValue":t[8]||(t[8]=e=>u.emergency.actnCntn=e)},null,512),[[n.nr,u.emergency.actnCntn]]),ee,(0,a._)("button",{style:{width:"100%"},onClick:t[9]||(t[9]=(...e)=>p.process&&p.process(...e))},se),ae])):(0,a.kq)("",!0)])])}var ne=s(7877),le={name:"UserEmergencyView",components:{},mounted:function(){this.$data.params.mcId=this.$route.query.mcId,this.$data.params.seq=this.$route.query.seq,this.$data.emergency.mcId=this.$route.query.mcId,this.$data.visit.mcId=this.$route.query.mcId,this.$data.show.menu=!0,this.$route.query.mcId?(this.getUserInfo(),this.getUserEmergency()):(this.getInfo(),this.getEmergency())},data(){return{params:{mcId:"",seq:-1},info:{titleNm:"",total:0,filters:0,nonfilters:0,emergency:0},show:{menu:!1,summary:!1},visit:{mcId:"",seq:-1,plan:""},emergency:{mcId:"",seq:-1,symptCntn:"",causeDesc:"",actnCntn:""},emergencies:[]}},methods:{async getUserInfo(){(0,ne.v)("/api/agency/user/info",this.$data.params).then((e=>this.resultUserInfo(e.data))).catch((e=>{alert(e)}))},resultUserInfo(e){console.log(e),this.$data.info.filters=e.filters,this.$data.info.nonfilters=e.nonfilters,this.$data.info.emergency=e.emergency,this.$data.info.titleNm=e.mcId,this.$data.info.total=e.filters+e.nonfilters,this.$data.show.summary=!0},async getInfo(){(0,ne.v)("/api/agency/info",null).then((e=>this.result(e.data))).catch((e=>{alert(e)}))},result(e){console.log("getInfo",e),this.$data.info.filters=e.filters,this.$data.info.nonfilters=e.nonfilters,this.$data.info.emergency=e.emergency,this.$data.info.total=e.filters+e.nonfilters,this.$data.info.titleNm=e.nm,this.$data.show.summary=!0,this.$data.show.donut|=1},async getUserEmergency(){(0,ne.v)("/api/agency/user/emergency/list",this.$data.params).then((e=>this.resultUserEmergency(e.data))).catch((e=>{alert(e)}))},resultUserEmergency(e){if(console.log("resultEmergency",e),this.$data.emergencies=e,void 0!=this.$data.params.seq)for(var t in e){let s=e[t];if(s.seq==this.$data.params.seq){this.$data.emergency.seq=s.seq,this.$data.visit.seq=s.seq;break}}},async getEmergency(){(0,ne.v)("/api/agency/emergency/list",this.$data.params).then((e=>this.resultUserEmergency(e.data))).catch((e=>{alert(e)}))},resultEmergency(e){if(console.log("resultEmergency",e),this.$data.emergencies=e,void 0!=this.$data.params.seq)for(var t in e){let s=e[t];if(s.seq==this.$data.params.seq){this.$data.emergency.seq=s.seq,this.$data.visit.seq=s.seq;break}}},move(e,t){console.log(e),"EMERGENCY"==e?this.$router.push({name:"agency_user_emergency",query:{mcId:this.$data.params.mcId}}):"HISTORY"==e?this.$router.push({name:"agency_user_history",query:{mcId:t||this.$data.params.mcId}}):"DEVICE"==e?this.$router.push({name:"agency_user_device",query:{mcId:this.$data.params.mcId}}):"ORDER"==e&&(this.$route.query.mcId?this.$router.push({name:"agency_user_order",query:{mcId:this.$route.query.mcId}}):this.$router.push({name:"agency_user_history_order"}))},seqChange(e){this.$data.emergency.seq=e,this.$data.visit.seq=e},async processVisit(){console.log(this.$data.emergency),this.$data.emergency.seq<0?alert("처리할 긴급호출을 선택해주세요."):""!=this.$data.emergency.plan?(0,ne.v)("/api/agency/emergency/visit",this.$data.visit).then((e=>this.resultProcess(e.data))).catch((e=>{alert(e)})):alert("방문일정을 입력해주세요.")},resultProcessVisit(e){"1000"==e.cd?alert("처리 중 오류가 발생하였습니다."):this.$router.push({name:"agency"})},async process(){console.log(this.$data.emergency),this.$data.emergency.seq<0?alert("처리할 긴급호출을 선택해주세요."):""!=this.$data.emergency.symptCntn?""!=this.$data.emergency.causeDesc?""!=this.$data.emergency.actnCntn?(0,ne.v)("/api/agency/emergency/process",this.$data.emergency).then((e=>this.resultProcess(e.data))).catch((e=>{alert(e)})):alert("조치사항을 입력해주세요."):alert("원인을 입력해주세요."):alert("증상을 입력해주세요.")},resultProcess(e){"1000"==e.cd?alert("처리 중 오류가 발생하였습니다."):this.$router.push({name:"agency"})}}},re=s(89);const ce=(0,re.Z)(le,[["render",ie]]);var oe=ce}}]);
//# sourceMappingURL=agency_user_emergency.c30bd2a6.js.map