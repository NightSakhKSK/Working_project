"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[672],{8948:function(e,t,a){a.r(t),a.d(t,{default:function(){return T}});var s=a(3396),i=a(7139);const l=e=>((0,s.dD)("data-v-22365cdc"),e=e(),(0,s.Cn)(),e),r={class:"agency_user_order"},d={key:0,class:"app-bar bg-hero fg-white","data-role":"appbar"},c={href:"/#/agency",class:"brand no-hover"},n={style:{"max-width":"200px","white-space":"nowrap"},class:"mif-home"},o=l((()=>(0,s._)("span",{class:"mif-history"}," History",-1))),u=[o],h=l((()=>(0,s._)("span",{class:"mif-cart"}," Order",-1))),f=[h],m=l((()=>(0,s._)("span",{class:"mif-help"}," Emergency",-1))),v=[m],y=(0,s.uE)('<ul class="app-bar-menu" data-v-22365cdc><li data-v-22365cdc><a href="/#/agency" data-v-22365cdc><span class="mif-home" data-v-22365cdc> 메인</span></a></li><li data-v-22365cdc><a href="/#/agency/user/list" data-v-22365cdc><span class="mif-list" data-v-22365cdc> 제품 설치 목록</span></a></li><li data-v-22365cdc><a href="/#/agency/user/add" data-v-22365cdc><span class="mif-wrench" data-v-22365cdc> 제품 설치 등록</span></a></li><li data-v-22365cdc><a href="/#/agency/chpw" data-v-22365cdc><span class="mif-key" data-v-22365cdc> 비밀번호 변경</span></a></li><li data-v-22365cdc><a href="/" data-v-22365cdc><span class="mif-exit" data-v-22365cdc> 로그아웃</span></a></li></ul>',1),p={class:"container-fluid docs-content",style:{height:"auto !important","margin-top":"60px"}},g=["data-title-caption"],_={class:"grid"},w=(0,s.uE)('<div class="row" data-v-22365cdc><div class="cell" data-v-22365cdc><div class="d-flex flex-justify-center" style="font-weight:bold;" data-v-22365cdc>Cylinder &amp; Syrups</div></div><div class="cell" data-v-22365cdc><div class="d-flex flex-justify-center" style="font-weight:bold;" data-v-22365cdc>Filters</div></div><div class="cell" data-v-22365cdc><div class="d-flex flex-justify-center" style="color:red;font-weight:bold;" data-v-22365cdc>Emergency</div></div></div>',1),q={class:"row"},$={class:"cell"},I={class:"d-flex flex-justify-center"},k={class:"cell"},b={class:"d-flex flex-justify-center"},D={class:"cell"},x={class:"d-flex flex-justify-center",style:{color:"red","font-weight":"bold"}},O=l((()=>(0,s._)("h4",null,"Order List",-1))),E={class:"table table-border cell-border"},C=l((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Date"),(0,s._)("th",null,"Order"),(0,s._)("th",null,"Qty"),(0,s._)("th",null,"ID")])],-1))),L={class:"grid"},R=["onClick"],z={class:"grid"},Y={class:"cell"},j=["onClick"];function H(e,t,a,l,o,h){return(0,s.wg)(),(0,s.iD)("div",r,[o.show.menu?((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("a",c,[(0,s._)("span",n,(0,i.zw)(" "+o.info.titleNm),1)]),this.$route.query.mcId?((0,s.wg)(),(0,s.iD)("a",{key:0,onClick:t[0]||(t[0]=e=>h.move("HISTORY")),class:"app-bar-item"},u)):(0,s.kq)("",!0),this.$route.query.mcId?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("a",{key:1,onClick:t[1]||(t[1]=e=>h.move("ORDER")),class:"app-bar-item"},f)),this.$route.query.mcId?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("a",{key:2,onClick:t[2]||(t[2]=e=>h.move("EMERGENCY")),class:"app-bar-item text-upper"},v)),y])):(0,s.kq)("",!0),(0,s._)("div",p,[o.info.show?((0,s.wg)(),(0,s.iD)("div",{key:0,"data-role":"panel","data-title-caption":"Total Order "+o.info.total,"data-title-icon":"<span class='mif-news'></span>"},[(0,s._)("div",_,[w,(0,s._)("div",q,[(0,s._)("div",$,[(0,s._)("div",I,(0,i.zw)(o.info.nonfilters),1)]),(0,s._)("div",k,[(0,s._)("div",b,(0,i.zw)(o.info.filters),1)]),(0,s._)("div",D,[(0,s._)("div",x,(0,i.zw)(o.info.emergency),1)])])])],8,g)):(0,s.kq)("",!0),O,(0,s._)("table",E,[C,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.orderList.filter((e=>"ORDER"==e.tp)),(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.seq},[(0,s._)("td",null,(0,i.zw)(e.date),1),(0,s._)("td",null,[(0,s._)("div",L,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.items,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"row",key:"nm_"+e.seq+"_"+t.seq},[(0,s._)("div",{class:"cell",onClick:t=>h.move(e.tp,e.mcId,e.seq)},(0,i.zw)(t.nm),9,R)])))),128))])]),(0,s._)("td",null,[(0,s._)("div",z,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.items,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"row",key:"qty_"+e.seq+"_"+t.seq},[(0,s._)("div",Y,(0,i.zw)(t.qty),1)])))),128))])]),(0,s._)("td",null,[(0,s._)("button",{class:"blue-button",onClick:t=>h.delivery(e.seq)},"배송",8,j)])])))),128))])])])])}var N=a(7877),U={name:"UserOrderView",components:{},mounted:function(){this.$data.params.mcId=this.$route.query.mcId,this.$data.show.menu=!0,this.$route.query.mcId?this.getUserInfo():this.getInfo(),this.getOrderList()},data(){return{params:{mcId:""},info:{show:!1,total:0,filters:0,nonfilters:0,emergency:0,titleNm:""},orderList:[],show:{menu:!1}}},methods:{async getUserInfo(){(0,N.v)("/api/agency/user/info",this.$data.params).then((e=>this.resultUserInfo(e.data))).catch((e=>{alert(e)}))},resultUserInfo(e){this.$data.info.filters=e.filters,this.$data.info.nonfilters=e.nonfilters,this.$data.info.emergency=e.emergency,this.$data.info.total=e.filters+e.nonfilters,this.$data.info.show=!0,this.$data.info.titleNm=e.mcId},async getInfo(){(0,N.v)("/api/agency/info",null).then((e=>this.result(e.data))).catch((e=>{alert(e)}))},result(e){console.log("getInfo",e),this.$data.info.filters=e.filters,this.$data.info.nonfilters=e.nonfilters,this.$data.info.emergency=e.emergency,this.$data.info.total=e.filters+e.nonfilters,this.$data.info.titleNm=e.nm,this.$data.info.show=!0,this.$data.show.donut|=1},async getOrderList(){(0,N.v)("/api/agency/user/order/list",this.$data.params).then((e=>this.resultOrderList(e.data))).catch((e=>{alert(e)}))},resultOrderList(e){console.log(e),this.$data.orderList=e},async delivery(e){var t=null;for(let s in this.$data.orderList){let a=this.$data.orderList[s];a.seq==e&&(t=a)}if(null!=t){var a="";for(let e=0;e<t.items.length;e++)a+=t.items[e].nm+" : "+t.items[e].qty+"EA\n";a+="\n배송완료처리 하시겠습니까?",confirm(a)&&(0,N.v)("/api/agency/user/order/delivery",{mcId:this.$data.params.mcId,seq:e}).then((e=>this.resultDelivery(e.data))).catch((e=>{alert(e)}))}else alert("잘못된 명령입니다.")},resultDelivery(e){"0000"==e.cd?this.getOrderList():alert("처리중 오류가 발생하였습니다")},move(e,t,a){"EMERGENCY"==e?this.$router.push({name:"agency_user_emergency",query:{mcId:t||this.$route.query.mcId,seq:a}}):"ORDER"==e?t||this.$route.query.mcId?this.$router.push({name:"agency_user_order",query:{mcId:t||this.$route.query.mcId,seq:a}}):this.$router.push({name:"agency_user_history_order",query:{seq:a}}):"HISTORY"==e&&this.$router.push({name:"agency_user_history_order",query:{mcId:t||this.$route.query.mcId,seq:a}})}}},K=a(89);const S=(0,K.Z)(U,[["render",H],["__scopeId","data-v-22365cdc"]]);var T=S}}]);
//# sourceMappingURL=agency_user_order.26a4e597.js.map